
create table gl_range_timestamp_subday
( id   integer
, data varchar2(30)
, ts   timestamp )
partition by range (ts)
( partition p20150101AM values less than (to_date('2015-01-01 12', 'yyyy-mm-dd hh24')) storage (initial 64k)
, partition p20150101PM values less than (to_date('2015-01-02 00', 'yyyy-mm-dd hh24')) storage (initial 64k)
, partition p20150102AM values less than (to_date('2015-01-02 12', 'yyyy-mm-dd hh24')) storage (initial 64k)
, partition p20150102PM values less than (to_date('2015-01-03 00', 'yyyy-mm-dd hh24')) storage (initial 64k)
, partition p20150103AM values less than (to_date('2015-01-03 12', 'yyyy-mm-dd hh24')) storage (initial 64k)
, partition p20150103PM values less than (to_date('2015-01-04 00', 'yyyy-mm-dd hh24')) storage (initial 64k)
, partition p20150104AM values less than (to_date('2015-01-04 12', 'yyyy-mm-dd hh24')) storage (initial 64k)
, partition p20150104PM values less than (to_date('2015-01-05 00', 'yyyy-mm-dd hh24')) storage (initial 64k)
, partition p20150105AM values less than (to_date('2015-01-05 12', 'yyyy-mm-dd hh24')) storage (initial 64k)
, partition p20150105PM values less than (to_date('2015-01-06 00', 'yyyy-mm-dd hh24')) storage (initial 64k)
, partition p20150106AM values less than (to_date('2015-01-06 12', 'yyyy-mm-dd hh24')) storage (initial 64k)
, partition p20150106PM values less than (to_date('2015-01-07 00', 'yyyy-mm-dd hh24')) storage (initial 64k)
, partition p20150107AM values less than (to_date('2015-01-07 12', 'yyyy-mm-dd hh24')) storage (initial 64k)
, partition p20150107PM values less than (to_date('2015-01-08 00', 'yyyy-mm-dd hh24')) storage (initial 64k)
, partition p20150108AM values less than (to_date('2015-01-08 12', 'yyyy-mm-dd hh24')) storage (initial 64k)
, partition p20150108PM values less than (to_date('2015-01-09 00', 'yyyy-mm-dd hh24')) storage (initial 64k)
, partition p20150109AM values less than (to_date('2015-01-09 12', 'yyyy-mm-dd hh24')) storage (initial 64k)
, partition p20150109PM values less than (to_date('2015-01-10 00', 'yyyy-mm-dd hh24')) storage (initial 64k)
, partition p20150110AM values less than (to_date('2015-01-10 12', 'yyyy-mm-dd hh24')) storage (initial 64k)
, partition p20150110PM values less than (to_date('2015-01-11 00', 'yyyy-mm-dd hh24')) storage (initial 64k)
, partition p20150111AM values less than (to_date('2015-01-11 12', 'yyyy-mm-dd hh24')) storage (initial 64k)
, partition p20150111PM values less than (to_date('2015-01-12 00', 'yyyy-mm-dd hh24')) storage (initial 64k)
, partition p20150112AM values less than (to_date('2015-01-12 12', 'yyyy-mm-dd hh24')) storage (initial 64k)
, partition p20150112PM values less than (to_date('2015-01-13 00', 'yyyy-mm-dd hh24')) storage (initial 64k)
, partition p20150113AM values less than (to_date('2015-01-13 12', 'yyyy-mm-dd hh24')) storage (initial 64k)
, partition p20150113PM values less than (to_date('2015-01-14 00', 'yyyy-mm-dd hh24')) storage (initial 64k)
, partition p20150114AM values less than (to_date('2015-01-14 12', 'yyyy-mm-dd hh24')) storage (initial 64k)
, partition p20150114PM values less than (to_date('2015-01-15 00', 'yyyy-mm-dd hh24')) storage (initial 64k)
, partition p20150115AM values less than (to_date('2015-01-15 12', 'yyyy-mm-dd hh24')) storage (initial 64k)
, partition p20150115PM values less than (to_date('2015-01-16 00', 'yyyy-mm-dd hh24')) storage (initial 64k)
, partition p20150116AM values less than (to_date('2015-01-16 12', 'yyyy-mm-dd hh24')) storage (initial 64k)
, partition p20150116PM values less than (to_date('2015-01-17 00', 'yyyy-mm-dd hh24')) storage (initial 64k)
, partition p20150117AM values less than (to_date('2015-01-17 12', 'yyyy-mm-dd hh24')) storage (initial 64k)
, partition p20150117PM values less than (to_date('2015-01-18 00', 'yyyy-mm-dd hh24')) storage (initial 64k)
, partition p20150118AM values less than (to_date('2015-01-18 12', 'yyyy-mm-dd hh24')) storage (initial 64k)
, partition p20150118PM values less than (to_date('2015-01-19 00', 'yyyy-mm-dd hh24')) storage (initial 64k)
, partition p20150119AM values less than (to_date('2015-01-19 12', 'yyyy-mm-dd hh24')) storage (initial 64k)
, partition p20150119PM values less than (to_date('2015-01-20 00', 'yyyy-mm-dd hh24')) storage (initial 64k)
, partition p20150120AM values less than (to_date('2015-01-20 12', 'yyyy-mm-dd hh24')) storage (initial 64k)
, partition p20150120PM values less than (to_date('2015-01-21 00', 'yyyy-mm-dd hh24')) storage (initial 64k)
, partition p20150121AM values less than (to_date('2015-01-21 12', 'yyyy-mm-dd hh24')) storage (initial 64k)
, partition p20150121PM values less than (to_date('2015-01-22 00', 'yyyy-mm-dd hh24')) storage (initial 64k)
, partition p20150122AM values less than (to_date('2015-01-22 12', 'yyyy-mm-dd hh24')) storage (initial 64k)
, partition p20150122PM values less than (to_date('2015-01-23 00', 'yyyy-mm-dd hh24')) storage (initial 64k)
, partition p20150123AM values less than (to_date('2015-01-23 12', 'yyyy-mm-dd hh24')) storage (initial 64k)
, partition p20150123PM values less than (to_date('2015-01-24 00', 'yyyy-mm-dd hh24')) storage (initial 64k)
, partition p20150124AM values less than (to_date('2015-01-24 12', 'yyyy-mm-dd hh24')) storage (initial 64k)
, partition p20150124PM values less than (to_date('2015-01-25 00', 'yyyy-mm-dd hh24')) storage (initial 64k)
, partition p20150125AM values less than (to_date('2015-01-25 12', 'yyyy-mm-dd hh24')) storage (initial 64k)
, partition p20150125PM values less than (to_date('2015-01-26 00', 'yyyy-mm-dd hh24')) storage (initial 64k)
, partition p20150126AM values less than (to_date('2015-01-26 12', 'yyyy-mm-dd hh24')) storage (initial 64k)
, partition p20150126PM values less than (to_date('2015-01-27 00', 'yyyy-mm-dd hh24')) storage (initial 64k)
, partition p20150127AM values less than (to_date('2015-01-27 12', 'yyyy-mm-dd hh24')) storage (initial 64k)
, partition p20150127PM values less than (to_date('2015-01-28 00', 'yyyy-mm-dd hh24')) storage (initial 64k)
, partition p20150128AM values less than (to_date('2015-01-28 12', 'yyyy-mm-dd hh24')) storage (initial 64k)
, partition p20150128PM values less than (to_date('2015-01-29 00', 'yyyy-mm-dd hh24')) storage (initial 64k)
, partition p20150129AM values less than (to_date('2015-01-29 12', 'yyyy-mm-dd hh24')) storage (initial 64k)
, partition p20150129PM values less than (to_date('2015-01-30 00', 'yyyy-mm-dd hh24')) storage (initial 64k)
, partition p20150130AM values less than (to_date('2015-01-30 12', 'yyyy-mm-dd hh24')) storage (initial 64k)
, partition p20150130PM values less than (to_date('2015-01-31 00', 'yyyy-mm-dd hh24')) storage (initial 64k)
, partition p20150131AM values less than (to_date('2015-01-31 12', 'yyyy-mm-dd hh24')) storage (initial 64k)
, partition p20150131PM values less than (to_date('2015-02-01 00', 'yyyy-mm-dd hh24')) storage (initial 64k)
);

insert into gl_range_timestamp_subday
   ( id, data, ts )
with pdates as (
   select distinct to_timestamp(substr(partition_name, 2, 8), 'yyyymmdd') as ts
   from   all_tab_partitions
   where  table_owner = sys_context('userenv','current_schema')
   and    table_name  = 'GL_RANGE_TIMESTAMP_SUBDAY'
   )
select rownum, dbms_random.string('u',30), ts + numtodsinterval(dbms_random.value(0,86399), 'SECOND')
from   pdates, (select rownum as r from dual connect by rownum <= 10)
;

